# Agoda Zipper

Java code challenge for **Agoda**

## Problem description

Write a program that compresses files and folders into a set of compressed files such that of each
compressed file does not exceed a maximum size. The same program cn be used for decompressing the files
that it has generated earlier. The output of the decompression should be identical to the original input
of the compression process.

When compression is needed, the program takes 3 parameters:

1. Path to Input directory. This directory will contain some files and folders.
1. Path to Output directory. This is where the program should write the compressed files to.
1. Maximum compressed size per file expressed in MB.

When decompression is needed, the program takes 2 parameters:

1. Path to Input directory. This directory contains the compressed files that were generated by the same program.
1. Path to Output directory. This is where the program should put the decompressed files & folders.

Consider the following when writing the code:

1. Some files may be greater than the JVM memory.
1. Some input files (even when compressed) may be greater than the maximum size allowed for output files.
1. You can use zip for compression algorithm (using JDK's implementation don't use a third party library for that) but
design the program to allow support different compression algorithms in the future.
1. When compressing, generate as few files as possible. You are not required to generate the absolute minimum number of
compressed files but doing so would be a plus.
1. Make the compression process run in parallel to speed up the compression for a single directory.

Write your production-quality code in Java or Scala. Submit your solution by using the link that was included in the email 

## How to build and run

### Prerequisite

- Java 8+
- Gradle

#### Build

The project uses Gradle. To build this application run following command:

```
> gradlew clean build
```

It will build an executable jar file in `/build/libs/zipper.jar`. 

#### Run

To run the program, move to the `/build/libs` folder and run following command:

```
> java -cp java -cp zipper.jar com.agoda.zipper.Application
```

### Output

#### Help or no argument

To get help for available command run application without parameters or with `?:

```
> java -cp java -cp zipper.jar com.agoda.zipper.Application -?
usage: java zipper.jar [-? | -v] [-a <SRC_DIR DEST_DIR SPLIT_LENGTH> | -x <SRC_FILE DEST_DIR>]
   -?,--help                                    print this help message
   -a,--add <SRC_DIR DEST_DIR SPLIT_LENGTH>     add directory to archive
   -v,--version                                 print product version and exit
   -x,--extract <SRC_FILE DEST_DIR>             extract file with full path
```

#### Compress folder

At this moment application accepts ZIP compression only.
To compress folder `d:\agoda\photo` with ZIP algorithm, split result into `10MB` files and put result into `d:\agoda\dest_new`, run following command:

```
> java -cp java -cp zipper.jar com.agoda.zipper.Application --add d:\agoda\photo d:\agoda\dest_new 10MB
```

#### Decompress folder

At this moment application accepts ZIP compression only.
To decompress zip archive `d:\agoda\dest\src.zip` with ZIP algorithm and put result into `d:\agoda\dest\res`, run following command:

```
> java -cp java -cp zipper.jar com.agoda.zipper.Application --extract d:\agoda\dest\src.zip d:\agoda\dest\res
```

